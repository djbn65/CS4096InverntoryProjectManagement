<UserControl x:Class="InventoryAndProjectManagement.MachineListItem"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:local="clr-namespace:InventoryAndProjectManagement"
             mc:Ignorable="d">
    <UserControl.Resources>
        <local:TitleToAbbrConverter x:Key="MachTitleToAbbrConverter" />
        <local:ImgPathToImgVisibilityConverter x:Key="ImgPathVisibilityConverter" />

        <Style TargetType="{x:Type ToolTip}">
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Setter Property="HasDropShadow" Value="True" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Placement" Value="Bottom" />
            <Setter Property="VerticalOffset" Value="0" />

            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToolTip}">
                        <StackPanel Margin="7,1">
                            <Border CornerRadius="5" Padding="8">
                                <Border.Background>
                                    <SolidColorBrush Color="Black" Opacity="0.85" />
                                </Border.Background>
                                <ContentPresenter Margin="1" HorizontalAlignment="Center" VerticalAlignment="Top" />
                            </Border>
                        </StackPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <materialDesign:Card
        materialDesign:ShadowAssist.ShadowDepth="Depth3"
        UniformCornerRadius="5"
        Name="Card"
        RenderTransformOrigin="0.5, 0.5"
        Cursor="Hand">
        <materialDesign:Card.Triggers>
            <EventTrigger RoutedEvent="materialDesign:Card.MouseEnter">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleX)" Storyboard.TargetName="Card"
                                    To="1.02" Duration="0:0:0.2" />
                        <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleY)" Storyboard.TargetName="Card"
                                    To="1.02" Duration="0:0:0.2" />
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
            <EventTrigger RoutedEvent="materialDesign:Card.MouseLeave">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleX)" Storyboard.TargetName="Card"
                                    To="1.0" Duration="0:0:0.2" />
                        <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleY)" Storyboard.TargetName="Card"
                                    To="1.0" Duration="0:0:0.2" />
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </materialDesign:Card.Triggers>

        <materialDesign:Card.RenderTransform>
            <ScaleTransform />
        </materialDesign:Card.RenderTransform>

        <Grid>
            <Grid
                Panel.ZIndex="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="175" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <materialDesign:ColorZone Mode="PrimaryMid" Panel.ZIndex="0">
                    <Viewbox>
                        <TextBlock
                            Text="{Binding Title, Converter={StaticResource MachTitleToAbbrConverter}}"
                            Foreground="{StaticResource MaterialDesignDarkForeground}" />
                    </Viewbox>
                </materialDesign:ColorZone>
                <Image
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Stretch="UniformToFill"
                    Source="{Binding ImgPath, TargetNullValue={x:Null}}"
                    Visibility="{Binding ImgPath, Converter={StaticResource ImgPathVisibilityConverter}}"
                    Panel.ZIndex="1" />
                <StackPanel
                    Grid.Row="1"
                    Margin="10, 20, 10, 10">
                    <TextBlock
                        Text="{Binding Title}"
                        FontSize="25"
                        HorizontalAlignment="Center" />
                    <Grid
                        Margin="0, 15, 0, 0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Button
                            Content="{materialDesign:PackIcon Kind=Trash, Size=25}"
                            Foreground="{StaticResource PrimaryHueMidBrush}"
                            BorderBrush="Transparent"
                            Style="{StaticResource MaterialDesignFloatingActionMiniAccentButton}"
                            ToolTip="Delete">
                            <Button.Triggers>
                                <EventTrigger RoutedEvent="Button.MouseEnter">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation
                                                Storyboard.TargetProperty="Color"
                                                Storyboard.TargetName="DeleteBg"
                                                To="Black"
                                                Duration="0:0:0.1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                                <EventTrigger RoutedEvent="Button.MouseLeave">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation
                                                Storyboard.TargetProperty="Color"
                                                Storyboard.TargetName="DeleteBg"
                                                To="Transparent"
                                                Duration="0:0:0.1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Button.Triggers>

                            <Button.Background>
                                <SolidColorBrush x:Name="DeleteBg" Color="Transparent" Opacity="0.05" />
                            </Button.Background>
                        </Button>
                        <StackPanel
                            Orientation="Horizontal"
                            Grid.Column="1"
                            HorizontalAlignment="Right">
                            <Button
                                Content="{materialDesign:PackIcon Kind=CheckBold, Size=25}"
                                Foreground="{StaticResource SecondaryHueMidBrush}"
                                BorderBrush="Transparent"
                                Style="{StaticResource MaterialDesignFloatingActionMiniAccentButton}"
                                ToolTip="Finished">
                                <Button.Triggers>
                                    <EventTrigger RoutedEvent="Button.MouseEnter">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ColorAnimation
                                                Storyboard.TargetProperty="Color"
                                                Storyboard.TargetName="DoneBg"
                                                To="Black"
                                                Duration="0:0:0.1" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                    <EventTrigger RoutedEvent="Button.MouseLeave">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ColorAnimation
                                                Storyboard.TargetProperty="Color"
                                                Storyboard.TargetName="DoneBg"
                                                To="Transparent"
                                                Duration="0:0:0.1" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Button.Triggers>

                                <Button.Background>
                                    <SolidColorBrush x:Name="DoneBg" Color="Transparent" Opacity="0.05" />
                                </Button.Background>
                            </Button>
                            <Button
                                Content="{materialDesign:PackIcon Kind=InformationCircleOutline, Size=25}"
                                Foreground="{StaticResource SecondaryHueMidBrush}"
                                BorderBrush="Transparent"
                                Style="{StaticResource MaterialDesignFloatingActionMiniAccentButton}"
                                ToolTip="More Information">
                                <Button.Triggers>
                                    <EventTrigger RoutedEvent="Button.MouseEnter">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ColorAnimation
                                                Storyboard.TargetProperty="Color"
                                                Storyboard.TargetName="InfoBg"
                                                To="Black"
                                                Duration="0:0:0.1" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                    <EventTrigger RoutedEvent="Button.MouseLeave">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ColorAnimation
                                                Storyboard.TargetProperty="Color"
                                                Storyboard.TargetName="InfoBg"
                                                To="Transparent"
                                                Duration="0:0:0.1" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Button.Triggers>

                                <Button.Background>
                                    <SolidColorBrush x:Name="InfoBg" Color="Transparent" Opacity="0.05" />
                                </Button.Background>
                            </Button>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Grid>
        </Grid>
    </materialDesign:Card>
</UserControl>